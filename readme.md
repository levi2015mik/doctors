# Тестовое задание Node.js Backend Developer

Сервис с API для записи человека на прием к врачу. Система работает по принципу REST api. 
Хранилище данных - mongodb.

## Конфигугации

Единственная внешняя зависимость приложения - mongodb. Настройки аутентификации передаются через переменные среды

```
MONGODB_DB_NAME
MONGODB_URI
```
Также они могут быть записаны в файл .env

Настраивается также имя файла логов эмуляции отправки уведомлений и интервал времени проверки для их отправки, но эти параметры имеют значения по умолчанию: messages.json и интервал 10 минут

## Запуск
Сервис весь целиком запускается командой 
`npm start` При первом запуске можно загрузить в базу тестовый набор врачей и пациентов. Это делается командой 
`npm run prefill` Эта команда добавляет нескольких врачей и пациентов, добавляет слоты для записи и записывает пациентов к докторам
## REST api
## Эмуляция отправки уведомлений
Отправка уведомлений осушествляется согласно техдаданию дважды - за день и за 2 часа.
За это отвечает модуль `structures/reminder`.
В нем подключается эмулятор отправки. Он обязан иметь единственную функцию `send(message,phone)` Это позволяет быстро подключить нужный метод отправки.

Фунуция эмулятор просто пишет уведомления в файл, а также в общий лог

## Необходимые доработки
Для полноценного использования приложению не хватает системы контроля доступа к api

Она должна иметь два уровня 
- клиентский
- административный

Клиентский должен позволять просматривать информацию о врачах, но без доступа к данным других пациентов. Также нужна возможность править информацию о себе.
Этого можно достичь через аутентификацию и добавление временных пользовательских токенов в каждый объект пользователя.
Токен может приходить через cookie. Еще для этого прийдется где то хранить информацию об аутентификации

Клиентский уровень также требуется снабдить ограничением на количество запросов с одного ip
 
 Административное api отвечает за добавление, удаление, редактирование докторов, открытие слотов. Для доступа к нему достаточно иметь секретный api-key и передавать его через http headers
 
 В сегодняшнем варианте нет системы контроля доступа и все запросы могут быть выполнены.